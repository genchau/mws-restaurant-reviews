(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(e,t,r){"use strict";var a=r(1);function n(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,o=[{key:"restaurantImgUrl",value:function(e){var t=e.photograph;return!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?"./images/".concat(t):"".concat(this.BASE_URL,"/images/").concat(t)}},{key:"restaurantUrl",value:function(e){var t=e.id;return!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?"./restaurant.html?id=".concat(t):"".concat(this.BASE_URL,"/restaurant.html?id=").concat(t)}},{key:"fetchRestaurants",value:function(){return fetch(this.DB_URL).then(function(e){if(!e.ok)throw Error("Unable to retrieve restaurant data");return e.json()}).then(function(e){return e.restaurants}).catch(console.error)}},{key:"fetchRestaurant",value:function(e){return this.fetchRestaurants().then(function(t){return t.filter(function(t){return t.id===e})[0]})}},{key:"calculateAverageReview",value:function(e){return this.fetchRestaurant(e).then(function(e){var t=e.reviews;return t?Math.max(Math.round(t.reduce(function(e,t){return e+t.rating},0)/t.length*10)/10,1).toFixed(1):0}).catch(console.error)}},{key:"BASE_URL",get:function(){return"".concat(a.a.HOST).concat(a.a.PORT&&":".concat(a.a.PORT))}},{key:"DB_URL",get:function(){return"./data/restaurants.json"}}],(r=null)&&n(t.prototype,r),o&&n(t,o),e}();t.a=o},,function(e,t,r){"use strict";var a=r(1);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,t=document.createElement("script");t.setAttribute("src","https://maps.googleapis.com/maps/api/js?key=".concat(a.a.MAPS_KEY,"&callback=initMap")),t.setAttribute("async",""),t.setAttribute("defer",""),e.appendChild(t)}},function(e,t,r){"use strict";function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var n=function(){function e(t,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this._options=Object.assign({},{zoom:12,center:{lat:40.722216,lng:-73.987501},disableDefaultUI:!0,scrollwheel:!1},r),this.element=t||document.getElementById("map"),this._googleMap=new google.maps.Map(this.element,this._options),this.markers=[],this.lastMarker=null,a&&setTimeout(a,1e3)}var t,r,n;return t=e,(r=[{key:"addMarkers",value:function(e,t){var r=this,a=new google.maps.LatLngBounds;this.markers=e.map(function(e){var n=r.addMarkerWithInfoWindow(e,t);return a.extend(n.position),n}),this.markers.length>0&&(this.GoogleMap.fitBounds(a),this.GoogleMap.setZoom(this._options.zoom))}},{key:"addMarker",value:function(e){var t=e.position,r=e.content;return new google.maps.Marker({animation:google.maps.Animation.DROP,map:this.GoogleMap,position:t,content:r})}},{key:"addMarkerWithInfoWindow",value:function(e,t){var r=this,a=this.addMarker(e),n=new google.maps.InfoWindow;return a.addListener("click",function(){r.lastMarker&&r.lastMarker.close(),r.lastMarker=n,r.GoogleMap.panTo(a.getPosition()),r.GoogleMap.panBy(0,-150),t(n,a)}),a}},{key:"resetMarkers",value:function(){this.markers.forEach(function(e,t){e.setMap(null),google.maps.event.clearInstanceListeners(e)}),this.markers=[]}},{key:"GoogleMap",get:function(){return this._googleMap}}])&&a(t.prototype,r),n&&a(t,n),e}();t.a=n},,,function(e,t,r){(e.exports=r(5)(!1)).push([e.i,'.breadcrumbs{background:hsla(0,0%,93%,.25);border-bottom:1px inset rgba(51,51,51,.25);padding:1.06667rem}.breadcrumbs__nav-list{list-style:none;margin:0;padding:0}.breadcrumbs__nav-item{display:inline}.breadcrumbs__nav-item:first-of-type:after{display:inline-block;margin:0 .8rem;transform:rotate(15deg);border-right:.125rem solid currentColor;height:1.2rem;content:""}.breadcrumbs__nav-item[aria-current=page]{color:#333;font-weight:700;text-decoration:none}.breadcrumbs__nav-item[aria-current=page]:after{content:""}.breadcrumbs__link{color:#ff3100}.breadcrumbs__link:active,.breadcrumbs__link:focus{outline:none;text-decoration:underline}.restaurant__map-container{display:flex;flex:0 1 auto;flex-direction:column;height:auto;max-width:100%}.restaurant__map-container .restaurant__map{background-color:#e1e1e1;border:1px inset rgba(51,51,51,.25);border-bottom:0;flex:1 0 auto;height:auto;min-height:12.5rem;opacity:1;position:relative;transition:opacity 1s ease;width:100%}.restaurant__map-container .restaurant__map .restaurant__map-loading{color:rgba(51,51,51,.85);display:block;font-weight:700;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}.restaurant__map-container .restaurant__map-footer{align-items:center;background:rgba(154,255,220,.15);border:1px solid rgba(51,51,51,.25);display:flex;justify-content:space-between}.restaurant__map-container .restaurant__map-footer .restaurant__address-container{flex:1;padding:.8rem}.restaurant__map-container .restaurant__map-footer .restaurant__enlarge-map-button{align-self:stretch;background:#eee;border:0;border-left:1px solid hsla(0,0%,93%,.25);color:#333;cursor:pointer;font-size:160%;font-weight:700;padding:0 1.6rem}.restaurant{display:grid;grid-template-areas:"h" "s" "i" "m" "d" "r"}.restaurant .restaurant__header{grid-area:h}.restaurant .restaurant__star-rating{grid-area:s}.restaurant .restaurant__image-container{grid-area:i;padding:0}.restaurant .restaurant__map-container{grid-area:m}.restaurant .restaurant__details{grid-area:d}.restaurant .restaurant__reviews-container{grid-area:r}@media screen and (min-width:825px){.restaurant{grid:"i i h h h h h" "i i s s s s s" "i i m m m m m" "d d d d d d d" "r r r r r r r";grid-template-columns:250px 1fr repeat(4,1fr);grid-template-rows:auto auto 1fr;column-gap:1rem;margin:0 auto;padding:1.6rem}.restaurant .restaurant__image-container{height:auto;max-height:600px;max-width:800px;margin:auto}.restaurant .restaurant__image-container .restaurant__image{border-radius:2.4rem}}.restaurant__header{padding:.8rem}.restaurant__header .restaurant__name{color:#b22200;font-size:3.2rem;letter-spacing:.025ch;line-height:1;padding-bottom:.8rem}.restaurant__header .restaurant__cuisine,.restaurant__header .restaurant__hours-today{color:#737373;display:block;font-size:1.6rem;padding:0}.restaurant__header .restaurant__hours-today{padding-bottom:.8rem}.restaurant__star-rating,.star-rating{align-items:center;display:flex;flex-wrap:nowrap;margin:-.8rem 0 .8rem;padding:0 .8rem}.restaurant__star-rating .star-rating__container,.star-rating .star-rating__container{unicode-bidi:bidi-override;color:#eee;font-size:1.6rem;flex:0 1 8rem;position:relative;text-shadow:0 1px 0 #333}.restaurant__star-rating .star-rating__container .star-rating__top,.star-rating .star-rating__container .star-rating__top{color:#ffb100;display:block;left:0;overflow:hidden;position:absolute;top:0;width:85%;z-index:1}.restaurant__star-rating .star-rating__container .star-rating__bottom,.star-rating .star-rating__container .star-rating__bottom{display:block;z-index:0}.restaurant__star-rating .star-rating__link,.star-rating .star-rating__link{color:#ff3100;margin:.3rem 0 0 .8rem}.restaurant__details{padding:.8rem}.subheading{color:#b22200;font-size:2.4rem;margin-bottom:.8rem}@media screen and (max-width:550px){.restaurant__hours,.restaurant__hours tbody,.restaurant__hours td,.restaurant__hours th,.restaurant__hours thead,.restaurant__hours tr{display:block}.restaurant__hours thead tr{position:absolute;top:-9999px;left:-9999px}.restaurant__hours tbody tr{border:1px solid #eee;border-radius:.3rem;margin:1.06667rem 0 2.4rem}.restaurant__hours tbody tr:last-child{margin-bottom:0}.restaurant__hours tbody tr td:nth-child(2n){background:hsla(0,0%,93%,.5)}.restaurant__hours tbody tr td:nth-child(4n){border-bottom:1px solid transparent}.restaurant__hours td{border-bottom:1px solid #eee;position:relative;padding:1.06667rem 0 1.06667rem 50%}.restaurant__hours td:before{font-style:normal;position:absolute;left:.5rem;content:attr(data-th);font-weight:700;text-transform:uppercase}}.restaurant__reviews-container{padding:.8rem}.restaurant__review{border:1px solid rgba(51,51,51,.25);border-radius:.8rem;margin-bottom:2rem}.restaurant__review .review__top{background:#333;border-radius:.8rem .8rem 0 0;color:#eee;padding:.8rem}.restaurant__review .review__top .review__username{display:inline-block;text-transform:uppercase;font-size:1.6rem}.restaurant__review .review__top .star-rating{float:right;margin:0;padding:0}.restaurant__review .review__body{padding:.8rem}.restaurant__review .review__date{color:#737373;font-style:italic}.restaurant__review .review__comment{margin:.8rem 0}',""])},function(e,t,r){var a=r(6);"string"==typeof a&&(a=[[e.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};r(4)(a,n);a.locals&&(e.exports=a.locals)},,,function(e,t,r){"use strict";r.r(t);r(1);var a=r(0),n=r(3),o=r(2),i=function(e){if(e){if(URLSearchParams)return new URLSearchParams(location.search).get(e);e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]".concat(e,"=([^&#]*)")).exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}};r(7);self.initMap=function(){c.loadMap()};var s=function(){var e=document.createElement("span"),t=document.createDocumentFragment();e.textContent="â˜…";for(var r=5;r>0;r--){var a=e.cloneNode(!0);t.appendChild(a)}return t},u=function(e){var t=document.createElement("div"),r=t.cloneNode(),a=t.cloneNode(),n=t.cloneNode();return r.className="star-rating__container",a.className="star-rating__top",a.style.width="".concat(e,"%"),a.appendChild(s()),r.appendChild(a),n.className="star-rating__bottom",n.appendChild(s()),r.appendChild(n),r},c={map:null,restaurant:null,pageElements:{breadcrumbs:document.querySelector(".breadcrumbs__nav-list"),restaurantContainer:document.querySelector(".restaurant"),restaurantName:document.querySelector(".restaurant__name"),restaurantCuisine:document.querySelector(".restaurant__cuisine"),restaurantHoursToday:document.querySelector(".hours-today__text"),restaurantAddress:document.querySelector(".restaurant__address"),restaurantNeighborhood:document.querySelector(".restaurant__neighborhood"),restaurantStarRating:document.querySelector(".restaurant__star-rating"),restaurantHoursContainer:document.querySelector(".restaurant__hours-container"),restaurantImageContainer:document.querySelector(".restaurant__image-container"),reviewsContainer:document.querySelector(".restaurant__reviews-container")},render:function(){var e=this,t=+i("id");t?a.a.fetchRestaurant(t).then(function(r){r?(Object(o.a)(),e.restaurant=r,document.title+=" | ".concat(e.restaurant.name),e.fillBreadcrumb(),e.renderRestaurant()):console.error("Unable to retrieve a restaurant with the ID ".concat(t))}).catch(console.error):console.error("The restaurant ID could not be located")},renderRestaurant:function(){this.generateImage(),this.populateHeader(),this.generateAverageRating(),this.populateAddress(),this.populateDetails(),this.renderReviews()},populateHeader:function(){var e=this.pageElements,t=e.restaurantName,r=e.restaurantCuisine,a=e.restaurantHoursToday,n=this.restaurant,o=n.name,i=n.cuisine_type,s=n.operating_hours,u=Object.keys(s)[(new Date).getDay()-1];t.textContent=o,r.textContent=i,a.textContent=s[u]},generateImage:function(){var e=this.pageElements.restaurantImageContainer,t=this.restaurant.altText,r=document.createElement("img");r.src=a.a.restaurantImgUrl(this.restaurant),r.alt=t,r.className="restaurant__image",r.onload=function(t){e.appendChild(r)}},generateAverageRating:function(){var e=this.pageElements.restaurantStarRating,t=this.restaurant.reviews,r=function(e){return e.reduce(function(e,t){return e+t.rating},0)/(5*e.length)*100}(t),a=document.createElement("a");e.appendChild(u(r)),a.setAttribute("href","#reviews"),a.setAttribute("title","Skip to customer reviews"),a.className="star-rating__link",a.textContent="".concat(t.length," reviews"),e.appendChild(a)},populateAddress:function(){var e=this.pageElements,t=e.restaurantAddress,r=e.restaurantNeighborhood,a=this.restaurant,n=a.address,o=a.neighborhood;t.textContent=n,r.textContent=o},populateDetails:function(){var e=this.pageElements.restaurantHoursContainer,t=this.restaurant.operating_hours;e.appendChild(function(e){var t=document.createDocumentFragment(),r=document.createElement("table"),a=document.createElement("tr"),n=document.createElement("thead"),o=a.cloneNode(),i=document.createElement("tbody"),s=a.cloneNode(),u=document.createElement("th"),c=document.createElement("td");for(var d in r.className="restaurant__hours",n.appendChild(o),i.appendChild(s),e){var l=u.cloneNode(),m=c.cloneNode();l.textContent=d,m.innerHTML=e[d].includes(",")?e[d].replace(", ","<br>"):e[d],m.setAttribute("data-th",d),o.appendChild(l),s.appendChild(m)}return r.appendChild(n),r.appendChild(i),t.appendChild(r),t}(t))},renderReviews:function(){var e=this.restaurant.reviews,t=this.pageElements.reviewsContainer,r=document.createDocumentFragment();if(!e){var a=document.createElement("p");return a.textContent="".concat(this.restaurant.name," does not have any reviews"),a.className="restaurant-reviews__empty",void t.appendChild(a)}var n=document.createElement("ul");n.className="restaurant__reviews",e.forEach(function(e){r.appendChild(function(e){var t=document.createElement("li"),r=document.createElement("div"),a=document.createElement("p"),n=r.cloneNode(),o=r.cloneNode(),i=a.cloneNode(),s=r.cloneNode(),c=a.cloneNode(),d=a.cloneNode();return t.className="restaurant__review",n.className="review__top",o.className="review__body",i.textContent=e.name,i.className="review__username",n.appendChild(i),s.className="star-rating",s.setAttribute("aria-label","User rating: ".concat(e.rating)),s.appendChild(u(e.rating/5*100)),n.appendChild(s),c.textContent=e.date,c.className="review__date",d.innerHTML=e.comments,d.className="review__comment",o.appendChild(c),o.appendChild(d),t.appendChild(n),t.appendChild(o),t}(e))}),n.appendChild(r),t.appendChild(n)},fillBreadcrumb:function(){var e=this.pageElements.breadcrumbs,t=document.createElement("li");t.textContent=this.restaurant.name,t.classList.add("breadcrumbs__nav-item"),t.setAttribute("aria-current","page"),e.appendChild(t)},loadMap:function(){this.map=new n.a(null,{zoom:16,center:this.restaurant.latlng,scrollwheel:!1},function(){document.querySelector("#map iframe").title="Restaurant Location"}),this.restaurant&&this.updateMap()},updateMap:function(){this.map&&this.map.addMarker({position:this.restaurant.latlng,content:{}})}};t.default=c}]]);
//# sourceMappingURL=restaurant.min.js.map