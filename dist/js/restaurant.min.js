(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{131:function(e,t,a){"use strict";a.r(t);var n=a(15),r=a(52),o=a(11);self.initMap=function(){s.loadMap()};var s={map:null,restaurant:null,pageElements:{breadcrumbs:document.querySelector(".breadcrumbs__nav-list"),restaurantContainer:document.querySelector(".restaurant"),restaurantName:document.querySelector(".restaurant__name"),restaurantCuisine:document.querySelector(".restaurant__cuisine"),restaurantHoursToday:document.querySelector(".hours-today__text"),restaurantAddress:document.querySelector(".restaurant__address"),restaurantNeighborhood:document.querySelector(".restaurant__neighborhood"),restaurantStarRating:document.querySelector(".restaurant__star-rating"),restaurantHoursContainer:document.querySelector(".restaurant__hours-container"),restaurantImageContainer:document.querySelector(".restaurant__image-container"),reviewsContainer:document.querySelector(".restaurant__reviews-container")},render:function(){var e=this,t=+Object(o.a)("id");t?n.a.fetchRestaurant(t).then(function(t){Object(o.c)(),e.restaurant=t,document.title+=" | ".concat(e.restaurant.name),e.fillBreadcrumb(),e.renderRestaurant()}).catch(console.error):console.error("The restaurant ID could not be located")},renderRestaurant:function(){this.generateImage(),this.populateHeader(),this.generateAverageRating(),this.populateAddress(),this.populateDetails(),this.renderReviews(),Object(o.b)()},populateHeader:function(){var e=this.pageElements,t=e.restaurantName,a=e.restaurantCuisine,n=e.restaurantHoursToday,r=this.restaurant,o=r.name,s=r.cuisine_type,i=r.operating_hours,u=Object.keys(i),l=(new Date).getDay(),c=u[l>0?l-1:l];t.textContent=o,a.textContent=s,n.textContent=i[c]},generateImage:function(){var e=this.pageElements.restaurantImageContainer,t=this.restaurant,a=t.id,r=t.altText,s=document.createElement("span");s.className="spinner",e.appendChild(s),e.appendChild(Object(o.d)({id:a,src:n.a.restaurantImgUrl({id:a,size:"small"}),sizes:"100vw",alt:r,className:"restaurant__image"},function(t){s.parentNode&&s.parentNode.removeChild(s),e.appendChild(t)}))},generateAverageRating:function(){var e=this.pageElements.restaurantStarRating,t=this.restaurant,a=t.averageReview,n=t.reviews,r=document.createElement("a");e.appendChild(Object(o.e)(a)),r.setAttribute("href","#reviews"),r.setAttribute("title","Skip to customer reviews"),r.className="star-rating__link",r.textContent="".concat(n.length," reviews"),e.appendChild(r)},populateAddress:function(){var e=this.pageElements,t=e.restaurantAddress,a=e.restaurantNeighborhood,n=this.restaurant,r=n.address,o=n.neighborhood;t.textContent=r,a.textContent=o},populateDetails:function(){var e=this.pageElements.restaurantHoursContainer,t=this.restaurant.operating_hours;e.appendChild(function(e){var t=document.createDocumentFragment(),a=document.createElement("table"),n=document.createElement("tr"),r=document.createElement("thead"),o=n.cloneNode(),s=document.createElement("tbody"),i=n.cloneNode(),u=document.createElement("th"),l=document.createElement("td");for(var c in a.className="restaurant__hours",r.appendChild(o),s.appendChild(i),e){var d=u.cloneNode(),p=l.cloneNode();d.textContent=c,p.innerHTML=e[c].includes(",")?e[c].replace(", ","<br>"):e[c],p.setAttribute("data-th",c),o.appendChild(d),i.appendChild(p)}return a.appendChild(r),a.appendChild(s),t.appendChild(a),t}(t))},renderReviews:function(){var e=this.restaurant.reviews,t=this.pageElements.reviewsContainer,a=document.createDocumentFragment();if(!e){var n=document.createElement("p");return n.textContent="".concat(this.restaurant.name," does not have any reviews"),n.className="restaurant-reviews__empty",void t.appendChild(n)}var r=document.createElement("ul");r.className="restaurant__reviews",e.forEach(function(e){a.appendChild(function(e){var t=document.createElement("li"),a=document.createElement("div"),n=document.createElement("p"),r=a.cloneNode(),s=a.cloneNode(),i=n.cloneNode(),u=a.cloneNode(),l=n.cloneNode(),c=n.cloneNode();return t.className="restaurant__review",r.className="review__top",s.className="review__body",i.textContent=e.name,i.className="review__username",r.appendChild(i),u.className="star-rating",u.setAttribute("aria-label","User rating: ".concat(e.rating)),u.appendChild(Object(o.e)(e.rating/5*100)),r.appendChild(u),l.textContent=e.date,l.className="review__date",c.innerHTML=e.comments,c.className="review__comment",s.appendChild(l),s.appendChild(c),t.appendChild(r),t.appendChild(s),t}(e))}),r.appendChild(a),t.appendChild(r)},fillBreadcrumb:function(){var e=this.pageElements.breadcrumbs,t=document.createElement("li");t.textContent=this.restaurant.name,t.classList.add("breadcrumbs__nav-item"),t.setAttribute("aria-current","page"),e.appendChild(t)},loadMap:function(){this.map=new r.a(null,{zoom:16,center:this.restaurant.latlng,scrollwheel:!1},function(){document.querySelector("#map iframe").title="Restaurant Location"}),this.restaurant&&this.updateMap()},updateMap:function(){this.map&&this.map.addMarker({position:this.restaurant.latlng,content:{}})}};t.default=s},52:function(e,t,a){"use strict";function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this._options=Object.assign({},{zoom:12,center:{lat:40.722216,lng:-73.987501},disableDefaultUI:!0,scrollwheel:!1},a),this.element=t||document.getElementById("map"),this._googleMap=new google.maps.Map(this.element,this._options),this.markers=[],this.lastMarker=null}var t,a,r;return t=e,(a=[{key:"addMarkers",value:function(e,t){var a=this,n=new google.maps.LatLngBounds;this.markers=e.map(function(e){var r=a.addMarkerWithInfoWindow(e,t);return n.extend(r.position),r}),this.markers.length>0&&(this.GoogleMap.fitBounds(n),this.GoogleMap.setZoom(this._options.zoom))}},{key:"addMarker",value:function(e){var t=e.position,a=e.content;return new google.maps.Marker({animation:google.maps.Animation.DROP,map:this.GoogleMap,position:t,content:a})}},{key:"addMarkerWithInfoWindow",value:function(e,t){var a=this,n=this.addMarker(e),r=new google.maps.InfoWindow,o=document.createElement("div");return o.className="infoWindow",o.appendChild(n.content),r.setContent(o),n.addListener("click",function(){a.lastMarker&&a.lastMarker.close(),a.lastMarker=r,a.GoogleMap.panTo(n.getPosition()),a.GoogleMap.panBy(0,-150),t(r,n)}),n}},{key:"resetMarkers",value:function(){this.markers.forEach(function(e,t){e.setMap(null),google.maps.event.clearInstanceListeners(e)}),this.markers=[]}},{key:"GoogleMap",get:function(){return this._googleMap}}])&&n(t.prototype,a),r&&n(t,r),e}();t.a=r}}]);
//# sourceMappingURL=restaurant.min.js.map