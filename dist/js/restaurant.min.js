(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{344:function(e,t,a){"use strict";a.r(t);var n=a(92),r={map:null,restaurant:null,pageElements:{breadcrumbs:document.querySelector(".breadcrumbs__nav-list"),restaurantContainer:document.querySelector(".restaurant"),restaurantName:document.querySelector(".restaurant__name"),restaurantCuisine:document.querySelector(".restaurant__cuisine"),restaurantHoursToday:document.querySelector(".hours-today__text"),restaurantAddress:document.querySelector(".restaurant__address"),restaurantNeighborhood:document.querySelector(".restaurant__neighborhood"),restaurantStarRating:document.querySelector(".restaurant__star-rating"),restaurantHoursContainer:document.querySelector(".restaurant__hours-container"),restaurantImageContainer:document.querySelector(".restaurant__image-container"),reviewsContainer:document.querySelector(".restaurant__reviews-container")},render:function(){var e=this,t=+Object(n.c)("id");t?n.a.fetchRestaurant(t).then(function(t){e.restaurant=t,document.title+=" | ".concat(e.restaurant.name),e.fillBreadcrumb(),e.renderRestaurant(),e.loadMap()}).catch(console.error):console.error("The restaurant ID could not be located")},renderRestaurant:function(){this.generateImage(),this.populateHeader(),this.generateAverageRating(),this.populateAddress(),this.populateDetails(),this.renderReviews(),Object(n.d)()},populateHeader:function(){var e=this.pageElements,t=e.restaurantName,a=e.restaurantCuisine,n=e.restaurantHoursToday,r=this.restaurant,s=r.name,o=r.cuisine_type,i=r.operating_hours,u=Object.keys(i),d=(new Date).getDay(),c=u[d>0?d-1:d];t.textContent=s,a.textContent=o,n.textContent=i[c]},generateImage:function(){var e=this.pageElements.restaurantImageContainer,t=this.restaurant,a=t.id,r=t.altText,s=document.createElement("span");s.className="spinner",e.appendChild(s),e.appendChild(Object(n.e)({id:a,src:n.a.restaurantImgUrl({id:a,size:"small"}),sizes:"100vw",alt:r,className:"restaurant__image"},function(t){s.parentNode&&s.parentNode.removeChild(s),e.appendChild(t)}))},generateAverageRating:function(){var e=this.pageElements.restaurantStarRating,t=this.restaurant,a=t.averageReview,r=t.reviews,s=document.createElement("a");e.appendChild(Object(n.f)(a)),s.setAttribute("href","#reviews"),s.setAttribute("title","Skip to customer reviews"),s.className="star-rating__link",s.textContent="".concat(r.length," reviews"),e.appendChild(s)},populateAddress:function(){var e=this.pageElements,t=e.restaurantAddress,a=e.restaurantNeighborhood,n=this.restaurant,r=n.address,s=n.neighborhood;t.textContent=r,a.textContent=s},populateDetails:function(){var e=this.pageElements.restaurantHoursContainer,t=this.restaurant.operating_hours;e.appendChild(function(e){var t=document.createDocumentFragment(),a=document.createElement("table"),n=document.createElement("tr"),r=document.createElement("thead"),s=n.cloneNode(),o=document.createElement("tbody"),i=n.cloneNode(),u=document.createElement("th"),d=document.createElement("td");for(var c in a.className="restaurant__hours",r.appendChild(s),o.appendChild(i),e){var l=u.cloneNode(),m=d.cloneNode();l.textContent=c,m.innerHTML=e[c].includes(",")?e[c].replace(", ","<br>"):e[c],m.setAttribute("data-th",c),s.appendChild(l),i.appendChild(m)}return a.appendChild(r),a.appendChild(o),t.appendChild(a),t}(t))},renderReviews:function(){var e=this.restaurant.reviews,t=this.pageElements.reviewsContainer,a=document.createDocumentFragment();if(!e){var r=document.createElement("p");return r.textContent="".concat(this.restaurant.name," does not have any reviews"),r.className="restaurant-reviews__empty",void t.appendChild(r)}var s=document.createElement("ul");s.className="restaurant__reviews",e.forEach(function(e){a.appendChild(function(e){var t=document.createElement("li"),a=document.createElement("div"),r=document.createElement("p"),s=a.cloneNode(),o=a.cloneNode(),i=r.cloneNode(),u=a.cloneNode(),d=r.cloneNode(),c=r.cloneNode();return t.className="restaurant__review",s.className="review__top",o.className="review__body",i.textContent=e.name,i.className="review__username",s.appendChild(i),u.className="star-rating",u.setAttribute("aria-label","User rating: ".concat(e.rating)),u.appendChild(Object(n.f)(e.rating/5*100)),s.appendChild(u),d.textContent=e.date,d.className="review__date",c.innerHTML=e.comments,c.className="review__comment",o.appendChild(d),o.appendChild(c),t.appendChild(s),t.appendChild(o),t}(e))}),s.appendChild(a),t.appendChild(s)},fillBreadcrumb:function(){var e=this.pageElements.breadcrumbs,t=document.createElement("li");t.textContent=this.restaurant.name,t.classList.add("breadcrumbs__nav-item"),t.setAttribute("aria-current","page"),e.appendChild(t)},loadMap:function(){var e=this.restaurant.latlng;this.map=new n.b(document.querySelector(".restaurant__map"),{zoom:16,center:[e.lat,e.lng]}),this.map.addMarkers([{position:[e.lat,e.lng]}],function(e){return e.target.closePopup()})}};t.default=r}}]);
//# sourceMappingURL=restaurant.min.js.map