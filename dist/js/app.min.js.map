{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/utils/index.js","webpack:///./src/js/utils/DBHelper.js","webpack:///./src/js/config/index.js","webpack:///./src/js/controllers/PageController.js","webpack:///./src/index.js","webpack:///./src/js/config/config.prod.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","installedModules","2","__webpack_require__","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","head","document","getElementsByTagName","script","createElement","charset","timeout","nc","setAttribute","src","p","0","1","jsonpScriptSrc","setTimeout","onScriptComplete","type","target","event","onerror","onload","clearTimeout","chunk","errorType","realSrc","error","Error","request","undefined","appendChild","all","m","c","d","name","getter","o","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","bind","slice","s","getUrlParameter","param","URLSearchParams","location","search","replace","results","RegExp","concat","exec","decodeURIComponent","loadGoogleMaps","node","arguments","body","_config__WEBPACK_IMPORTED_MODULE_0__","MAPS_KEY","makeImage","_ref","id","srcset","sizes","alt","className","image","_DBHelper__WEBPACK_IMPORTED_MODULE_1__","restaurantImgUrl","size","classList","add","HOST","PORT","dataset","generateStarsHtml","star","docFrag","createDocumentFragment","textContent","tmp","cloneNode","makeStarRating","reviews","rating","div","container","top","bottom","average","reduce","acc","review","averageRating","style","width","lazyLoadImages","lazyImages","querySelectorAll","activeScroll","displayAndRemove","remove","filter","removeEventListener","lazyLoad","forEach","lazyImage","getBoundingClientRect","innerHeight","getComputedStyle","display","rect","left","documentElement","clientHeight","addEventListener","registerSW","navigator","serviceWorker","register","then","registration","catch","DBHelper","this","BASE_URL","_ref2","fetch","DB_URL","response","ok","json","restaurants","fetchRestaurants","restaurantId","fetchRestaurant","_ref3","Math","max","round","a","toFixed","__webpack_exports__","config","default","MODE","render","utils","loadCurrentRoute","currentRoute","pathname","displayInstallPrompt","prompt","_this","IndexController","RestaurantController"],"mappings":"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","file":"./js/app.min.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t};\n\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t2: 0\n \t};\n\n\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"./js/\" + ({\"0\":\"restaurant\",\"1\":\"home\"}[chunkId]||chunkId) + \".min.js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar head = document.getElementsByTagName('head')[0];\n \t\t\t\tvar script = document.createElement('script');\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tfunction onScriptComplete(event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\tvar error = new Error('Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')');\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\thead.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","import config from '../config';\nimport DBHelper from './DBHelper';\n\n/**\n * Returns the value of the specified query string parameter \n * of the current URI.\n */\nconst getUrlParameter = param => {\n  if (!param) return;\n\n  // If URLSearchParams is supported, use that\n  if (URLSearchParams) {\n    const urlParams = new URLSearchParams(location.search);\n    return urlParams.get(param);\n  }\n\n  // Otherwise, parse the param using regular expressions\n  param = param.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n  const regex = new RegExp(`[\\\\?&]${param}=([^&#]*)`);\n  const results = regex.exec(location.search);\n  return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n};\n\n/**\n * Appends the Google Maps API script at the end of the document.body \n * or the specified node, if provided.\n * @param {HTMLElement} node \n */\nconst loadGoogleMaps = (node = document.body) => {\n  const script = document.createElement('script');\n\n  script.setAttribute('src', `https://maps.googleapis.com/maps/api/js?key=${config.MAPS_KEY}&callback=initMap`);\n  script.setAttribute('async', '');\n  script.setAttribute('defer', '');\n  node.appendChild(script);\n};\n\n/**\n * Makes a responsive image and returns it\n */\nconst makeImage = ({id, src, srcset, sizes, alt, className}, onload) => {\n  const image = document.createElement('img');\n  srcset = srcset || `${DBHelper.restaurantImgUrl({ id, size: 'small' })} 400w,\n                      ${DBHelper.restaurantImgUrl({ id, size: 'medium' })} 600w,\n                      ${DBHelper.restaurantImgUrl({ id, size: 'large' })} 800w`;\n\n  image.classList.add(className);\n  image.classList.add('lazy');\n  image.src = `${config.HOST}${config.PORT && `:${config.PORT}`}/images/placeholder.png`;\n  image.dataset.src = src;\n  image.dataset.srcset = srcset;\n  image.dataset.sizes = sizes;\n  image.alt = alt;\n\n  image.onload = event => {\n    if (onload) {\n      onload(image);\n    }\n  };\n\n  return image;\n};\n\n/**\n * Calculates average rating percentage\n */\nconst averageRating = reviews => {\n  const TOP_RATING = 5;\n  const total = reviews.reduce((acc, review) => {\n    return acc + review.rating;\n  }, 0);\n\n  return (total / (reviews.length * TOP_RATING) * 100);\n};\n\n/**\n * Generates the stars used for the ratings\n */\nconst generateStarsHtml = () => {\n  const RATING_LIMIT = 5;\n  const star = document.createElement('span');\n  const docFrag = document.createDocumentFragment();\n\n  star.textContent = '★';\n  \n  for (let i=RATING_LIMIT; i>0; i--) {\n    let tmp = star.cloneNode(true);\n    docFrag.appendChild(tmp);\n  }\n\n  return docFrag;\n}\n\n/**\n * Generates the HTML output for a star rating\n */\nconst generateStarRatingHtml = rating => {\n  const div = document.createElement('div');\n\n  const container = div.cloneNode();\n  const top = div.cloneNode();\n  const bottom = div.cloneNode();\n\n  container.className = 'star-rating__container';\n\n  top.className = 'star-rating__top';\n  top.style.width = `${rating}%`;\n  top.appendChild(generateStarsHtml());\n  container.appendChild(top);\n\n  bottom.className = 'star-rating__bottom';\n  bottom.appendChild(generateStarsHtml());\n  container.appendChild(bottom);\n\n  return container;\n};\n\n/**\n * Returns star rating for given reviews\n */\nconst makeStarRating = reviews => {\n  const average = averageRating(reviews);\n  return generateStarRatingHtml(average);\n};\n\nconst elementInViewport = el => {\n  const rect = el.getBoundingClientRect()\n\n  return (\n     rect.top    >= 0\n  && rect.left   >= 0\n  && rect.top <= (window.innerHeight || document.documentElement.clientHeight)\n  )\n};\n\n/**\n * Lazy loads images\n */\nconst lazyLoadImages = () => {\n  let lazyImages = [].slice.call(document.querySelectorAll('img.lazy'));\n  let activeScroll = false;\n\n  const displayAndRemove = image => {\n    image.src = image.dataset.src;\n    image.srcset = image.dataset.srcset;\n    image.classList.remove('lazy');\n\n    lazyImages = lazyImages.filter(i => i !== image);\n\n    if (lazyImages.length === 0) {\n      document.removeEventListener(\"scroll\", lazyLoad);\n      window.removeEventListener(\"resize\", lazyLoad);\n      window.removeEventListener(\"orientationchange\", lazyLoad);\n    }\n  };\n\n  const lazyLoad = () => {\n    if (activeScroll === false) {\n      activeScroll = true;\n\n      setTimeout(() => {\n        lazyImages.forEach(lazyImage => {\n          if (\n            (lazyImage.getBoundingClientRect().top <= window.innerHeight && \n             lazyImage.getBoundingClientRect().bottom >= 0) && \n            getComputedStyle(lazyImage).display !== 'none') {\n              displayAndRemove(lazyImage);\n          }\n        });\n\n        activeScroll = false;\n      }, 200);\n    }\n  };\n\n  // Remove images above the fold\n  lazyImages.forEach(lazyImage => {\n    if (elementInViewport(lazyImage)) {\n      displayAndRemove(lazyImage);\n    }\n  });\n\n  document.addEventListener(\"scroll\", lazyLoad);\n  window.addEventListener(\"resize\", lazyLoad);\n  window.addEventListener(\"orientationchange\", lazyLoad);\n};\n \n/**\n * Registers the Service Worker\n */\nconst registerSW = () => {\n  if (!navigator.serviceWorker) return;\n\n  navigator.serviceWorker.register('/sw.js')\n    .then(registration => {\n      // Do nothing...\n    })\n    .catch(console.error);\n};\n\nexport {\n  getUrlParameter,\n  lazyLoadImages,\n  loadGoogleMaps,\n  makeImage,\n  makeStarRating,\n  registerSW,\n};\n","import config from '../config';\n\nclass DBHelper {\n  static get BASE_URL() {\n    return `${config.HOST}${config.PORT && `:${config.PORT}`}`;\n  }\n\n  static get DB_URL(){\n    return `./data/restaurants.json`;\n  }\n\n  static restaurantImgUrl({ id, size }, relative = true) {\n    return (relative)\n     ? `./images/${id}-${size}.jpg`\n     : `${this.BASE_URL}/images/${id}-${size}.jpg`;\n  }\n\n  static restaurantUrl({ id }, relative = true) {\n    return (relative)\n     ? `./restaurant.html?id=${id}`\n     : `${this.BASE_URL}/restaurant.html?id=${id}`;\n  }\n\n  static fetchRestaurants() {\n    return fetch(this.DB_URL)\n      .then(response => {\n        if(!response.ok) {\n          throw Error('Unable to retrieve restaurant data');\n        }\n        \n        return response.json();\n      })\n      .then(results => results.restaurants)\n      .catch(console.error);\n  }\n\n  static fetchRestaurant(id) {\n    return this.fetchRestaurants()\n      .then(restaurants => restaurants.filter(r => r.id === id)[0]);\n  }\n\n  static calculateAverageReview(restaurantId) {\n    return this.fetchRestaurant(restaurantId)\n      .then(({ reviews }) => {\n        if (!reviews) return 0;\n\n        // Stand back, we're going to try mathematics!\n        return Math.max(\n                Math.round(\n                  (reviews.reduce((a, c) => a + c.rating, 0) / reviews.length) * 10\n                ) / 10, 1\n              ).toFixed(1);\n      })\n      .catch(console.error);\n  }\n};\n\nexport default DBHelper;\n","let config = null;\n\n// module.hot will be true in development and false in production\nif (module.hot) {\n  config = require('./config.dev').default;\n  config.MODE = 'development';\n}\nelse {\n  // import config.prod.js and export it\n  config = require('./config.prod').default;\n  config.MODE = 'production';\n}\n\nexport default config;\n","import { registerSW } from '../utils';\nimport '../../styles/main.scss';\n\nconst PageController = {\n  render() {\n    // Register the Service Worker\n    registerSW();\n\n    // Load the current route\n    this.loadCurrentRoute();\n  },\n\n  /**\n   * Determines the current route based on the URI\n   */\n  currentRoute() {\n    return window.location.pathname.replace(/\\.[^/.]+$/, '');\n  },\n\n  /**\n   * Prompts the user to install on home screen\n   */\n  displayInstallPrompt() {\n    window.addEventListener('beforeinstallprompt', event => {\n      event.prompt();\n    });\n  },\n\n  /**\n   * Lazy loads page controller depending on current route\n   */\n  loadCurrentRoute() {\n    switch(this.currentRoute()) {\n      case '/':\n        import(/*webpackChunkName: \"home\" */ './IndexController')\n          .then(IndexController => {\n            IndexController.default.render();\n          });\n\n        break;\n      case '/restaurant':\n        import(/*webpackChunkName: \"restaurant\" */ './RestaurantController')\n          .then(RestaurantController => {\n            // Show the deferred prompt\n            this.displayInstallPrompt();\n\n            RestaurantController.default.render();\n          });\n\n        break;\n    }\n  }\n};\n\nexport default PageController;","import PageController from './js/controllers/PageController';\n\n// Bombs away...\nPageController.render();\n","const config = {\n  HOST: 'https://restaurant-reviews.netlify.com',\n  PORT: '',\n  MAPS_KEY: 'AIzaSyCdhHwjurnlDda3XtpLrysWGsobzpRdpM8'\n};\n\nexport default config;\n"],"sourceRoot":""}