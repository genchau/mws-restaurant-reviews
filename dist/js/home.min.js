(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{132:function(e,t,n){"use strict";n.r(t);var a=n(15),r=n(52),s=n(11);function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}self.initMap=function(){c.loadMap()};var i=function(e,t){var n=document.createDocumentFragment(),a=document.createElement("option");t.forEach(function(e){var t=a.cloneNode();t.textContent=e,t.value=e,n.appendChild(t)}),e.appendChild(n)},l=function(e,t){var n=e.id,r=e.altText,o=document.createElement("div"),i=document.createElement("span");return o.className="image__container",i.className="spinner",o.appendChild(i),o.appendChild(Object(s.d)({id:n,src:a.a.restaurantImgUrl({id:n,size:"small"}),sizes:"100vw",alt:r,className:t},function(e){i.parentNode&&i.parentNode.removeChild(i),o.appendChild(e)})),o},c={map:null,restaurants:null,pageElements:{cuisineSelect:document.getElementById("cuisine"),filterForm:document.querySelector(".filters"),neighborhoodSelect:document.getElementById("neighborhood"),restaurantsList:document.querySelector(".restaurants-list"),restaurantResultCount:document.querySelector(".restaurant-count")},render:function(){var e=this;Object(s.c)(),a.a.fetchRestaurants().then(function(t){var n=e.pageElements,a=(n.mobileButtonBar,n.filterForm);e.restaurants=t,e.populateFilterForm(),e.populateRestaurantsList(),a.addEventListener("change",e.handleFilterUpdates.bind(e))}).catch(console.error)},populateFilterForm:function(){var e=o(new Set(this.restaurants.map(function(e){return e.neighborhood}))),t=o(new Set(this.restaurants.map(function(e){return e.cuisine_type}))),n=this.pageElements,a=n.neighborhoodSelect,r=n.cuisineSelect;i(a,e),i(r,t)},handleFilterUpdates:function(e){var t=this,n=this.pageElements,r=n.neighborhoodSelect,s=n.cuisineSelect,o=r[r.selectedIndex].value,i=s[s.selectedIndex].value;a.a.fetchRestaurants().then(function(e){if(!e)throw Error("Restaurants could not be displayed");e="all"!==i?e.filter(function(e){return e.cuisine_type===i}):e,e="all"!==o?e.filter(function(e){return e.neighborhood===o}):e,t.restaurants=e,t.populateRestaurantsList()}).catch(console.error),e.stopPropagation()},populateRestaurantsList:function(){if(this.restaurants){var e=this.pageElements,t=e.restaurantsList,n=e.restaurantResultCount,r=document.createDocumentFragment(),o=this.restaurants.length;this.restaurants.forEach(function(e){var t,n,o,i,c,u,d,p,m;r.appendChild((t=e,o=document.createElement("span"),i=document.createElement("li"),c=document.createElement("div"),u=document.createElement("h2"),d=o.cloneNode(),p=document.createElement("address"),m=document.createElement("a"),i.classList.add("restaurants-list__item"),c.className="restaurant-item__info",u.textContent=t.name,u.className="restaurant-item__title",d.textContent=t.neighborhood,d.className="restaurant-item__neighborhood",p.className="restaurant-item___address",p.textContent=t.address,(n=Object(s.e)(t.averageReview)).setAttribute("aria-label","Average review"),m.textContent="Details",m.href=a.a.restaurantUrl(t),m.title="View additional details about ".concat(t.name),m.className="restaurant-item__detail-link",c.append(u),c.append(n),c.append(d),c.append(p),c.append(m),i.append(l(t,"restaurant-item__image")),i.append(c),i))}),this.resetRestaurants(),t.appendChild(r),n.innerHTML='\n        Displaying <span class="restaurant-count__text">'.concat(o,"</span> \n        restaurant").concat(1===o?"":"s","\n      "),Object(s.b)(),this.updateMap()}},resetRestaurants:function(){var e=this.pageElements,t=e.restaurantsList,n=e.restaurantResultCount;t.innerHTML="",n.innerHTML='Displaying <span class="restaurant-count__text">0</span> restaurants'},updateMap:function(){if(this.map){var e=this.restaurants.map(function(e){var t=document.createDocumentFragment(),n=l(e,"infoWindow__image"),r=document.createElement("h2"),s=document.createElement("address"),o=document.createElement("a");return t.appendChild(n),r.className="infoWindow__title",r.textContent=e.name,t.appendChild(r),s.className="infoWindow__address",s.textContent=e.address,t.appendChild(s),o.className="infoWindow__link",o.textContent="View Details",o.setAttribute("href",a.a.restaurantUrl(e)),o.setAttribute("title","View more information about ".concat(e.name)),t.appendChild(o),{position:e.latlng,content:t}});this.resetMap(),this.map.addMarkers(e,this.handleMapMarkerClick)}},handleMapMarkerClick:function(e,t){var n=e.content.querySelector("img.lazy");n.src=n.dataset.src,n.srcset=n.dataset.srcset,n.classList.remove("lazy"),e.open(t.map,t)},loadMap:function(){this.map=new r.a,this.restaurants&&this.updateMap()},resetMap:function(){this.map&&this.map.resetMarkers()}};t.default=c},52:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this._options=Object.assign({},{zoom:12,center:{lat:40.722216,lng:-73.987501},disableDefaultUI:!0,scrollwheel:!1},n),this.element=t||document.getElementById("map"),this._googleMap=new google.maps.Map(this.element,this._options),this.markers=[],this.lastMarker=null}var t,n,r;return t=e,(n=[{key:"addMarkers",value:function(e,t){var n=this,a=new google.maps.LatLngBounds;this.markers=e.map(function(e){var r=n.addMarkerWithInfoWindow(e,t);return a.extend(r.position),r}),this.markers.length>0&&(this.GoogleMap.fitBounds(a),this.GoogleMap.setZoom(this._options.zoom))}},{key:"addMarker",value:function(e){var t=e.position,n=e.content;return new google.maps.Marker({animation:google.maps.Animation.DROP,map:this.GoogleMap,position:t,content:n})}},{key:"addMarkerWithInfoWindow",value:function(e,t){var n=this,a=this.addMarker(e),r=new google.maps.InfoWindow,s=document.createElement("div");return s.className="infoWindow",s.appendChild(a.content),r.setContent(s),a.addListener("click",function(){n.lastMarker&&n.lastMarker.close(),n.lastMarker=r,n.GoogleMap.panTo(a.getPosition()),n.GoogleMap.panBy(0,-150),t(r,a)}),a}},{key:"resetMarkers",value:function(){this.markers.forEach(function(e,t){e.setMap(null),google.maps.event.clearInstanceListeners(e)}),this.markers=[]}},{key:"GoogleMap",get:function(){return this._googleMap}}])&&a(t.prototype,n),r&&a(t,r),e}();t.a=r}}]);
//# sourceMappingURL=home.min.js.map