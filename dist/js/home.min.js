(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{133:function(e,t,n){"use strict";n.r(t);var a=n(9);function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s=function(e,t){var n=document.createDocumentFragment(),a=document.createElement("option");t.forEach(function(e){var t=a.cloneNode();t.textContent=e,t.value=e,n.appendChild(t)}),e.appendChild(n)},i=function(e){var t,n,r,s,i,o,u,c=document.createElement("span"),l=document.createElement("li"),d=document.createElement("div"),p=document.createElement("h2"),m=c.cloneNode(),h=document.createElement("address"),f=document.createElement("a");return l.classList.add("restaurants-list__item"),d.className="restaurant-item__info",p.textContent=e.name,p.className="restaurant-item__title",m.textContent=e.neighborhood,m.className="restaurant-item__neighborhood",h.className="restaurant-item___address",h.textContent=e.address,(t=Object(a.f)(e.averageReview)).setAttribute("aria-label","Average review"),f.textContent="Details",f.href=a.a.restaurantUrl(e),f.title="View additional details about ".concat(e.name),f.className="restaurant-item__detail-link",d.append(p),d.append(t),d.append(m),d.append(h),d.append(f),l.append((r="restaurant-item__image",s=(n=e).id,i=n.altText,o=document.createElement("div"),u=document.createElement("span"),o.className="image__container",u.className="spinner",o.appendChild(u),o.appendChild(Object(a.e)({id:s,src:a.a.restaurantImgUrl({id:s,size:"small"}),sizes:"100vw",alt:i,className:r},function(e){u.parentNode&&u.parentNode.removeChild(u),o.appendChild(e)})),o)),l.append(d),l},o={map:null,restaurants:null,pageElements:{cuisineSelect:document.getElementById("cuisine"),filterForm:document.querySelector(".filters"),neighborhoodSelect:document.getElementById("neighborhood"),restaurantsList:document.querySelector(".restaurants-list"),restaurantResultCount:document.querySelector(".restaurant-count")},render:function(){var e=this;a.a.fetchRestaurants().then(function(t){var n=e.pageElements,a=(n.mobileButtonBar,n.filterForm);e.restaurants=t,e.populateFilterForm(),e.populateRestaurantsList(),e.loadMap(),a.addEventListener("change",e.handleFilterUpdates.bind(e))}).catch(console.error)},populateFilterForm:function(){var e=r(new Set(this.restaurants.map(function(e){return e.neighborhood}))),t=r(new Set(this.restaurants.map(function(e){return e.cuisine_type}))),n=this.pageElements,a=n.neighborhoodSelect,i=n.cuisineSelect;s(a,e),s(i,t)},handleFilterUpdates:function(e){var t=this,n=this.pageElements,r=n.neighborhoodSelect,s=n.cuisineSelect,i=r[r.selectedIndex].value,o=s[s.selectedIndex].value;a.a.fetchRestaurants().then(function(e){if(!e)throw Error("Restaurants could not be displayed");e="all"!==o?e.filter(function(e){return e.cuisine_type===o}):e,e="all"!==i?e.filter(function(e){return e.neighborhood===i}):e,t.restaurants=e,t.populateRestaurantsList()}).catch(console.error),e.stopPropagation()},populateRestaurantsList:function(){if(this.restaurants){var e=this.pageElements,t=e.restaurantsList,n=e.restaurantResultCount,r=document.createDocumentFragment(),s=this.restaurants.length;this.restaurants.forEach(function(e){r.appendChild(i(e))}),this.resetRestaurants(),t.appendChild(r),n.innerHTML='\n        Displaying <span class="restaurant-count__text">'.concat(s,"</span> \n        restaurant").concat(1===s?"":"s","\n      "),Object(a.d)(),this.updateMap()}},resetRestaurants:function(){var e=this.pageElements,t=e.restaurantsList,n=e.restaurantResultCount;t.innerHTML="",n.innerHTML='Displaying <span class="restaurant-count__text">0</span> restaurants'},updateMap:function(){if(this.map){var e=this.restaurants.map(function(e){return{position:e.latlng,content:'\n        <div class="infoWindow">\n          <h2 class="infoWindow__title">'.concat(e.name,'</h2>\n          <address class="infoWindow__address">').concat(e.address,'</address>\n          <a href="').concat(a.a.restaurantUrl(e),'" class="View more information about ').concat(e.name,'" title="">View Details</a>\n        </div>\n      ')}});this.resetMap(),this.map.addMarkers(e)}},loadMap:function(){this.map=new a.b(document.querySelector(".map")),this.restaurants&&this.updateMap()},resetMap:function(){this.map&&this.map.removeMarkers()}};t.default=o}}]);
//# sourceMappingURL=home.min.js.map