(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[function(t,e,n){"use strict";var a=n(1);function r(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"restaurantImgUrl",value:function(t){var e=t.photograph;return!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?"./images/".concat(e):"".concat(this.BASE_URL,"/images/").concat(e)}},{key:"restaurantUrl",value:function(t){var e=t.id;return!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?"./restaurant.html?id=".concat(e):"".concat(this.BASE_URL,"/restaurant.html?id=").concat(e)}},{key:"fetchRestaurants",value:function(){return fetch(this.DB_URL).then(function(t){if(!t.ok)throw Error("Unable to retrieve restaurant data");return t.json()}).then(function(t){return t.restaurants}).catch(console.error)}},{key:"fetchRestaurant",value:function(t){return this.fetchRestaurants().then(function(e){return e.filter(function(e){return e.id===t})[0]})}},{key:"calculateAverageReview",value:function(t){return this.fetchRestaurant(t).then(function(t){var e=t.reviews;return e?Math.max(Math.round(e.reduce(function(t,e){return t+e.rating},0)/e.length*10)/10,1).toFixed(1):0}).catch(console.error)}},{key:"BASE_URL",get:function(){return"".concat(a.a.HOST).concat(a.a.PORT&&":".concat(a.a.PORT))}},{key:"DB_URL",get:function(){return"./data/restaurants.json"}}],(n=null)&&r(e.prototype,n),i&&r(e,i),t}();e.a=i},,function(t,e,n){"use strict";var a=n(1);e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,e=document.createElement("script");e.setAttribute("src","https://maps.googleapis.com/maps/api/js?key=".concat(a.a.MAPS_KEY,"&callback=initMap")),e.setAttribute("async",""),e.setAttribute("defer",""),t.appendChild(e)}},function(t,e,n){"use strict";function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var r=function(){function t(e,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this._options=Object.assign({},{zoom:12,center:{lat:40.722216,lng:-73.987501},disableDefaultUI:!0,scrollwheel:!1},n),this.element=e||document.getElementById("map"),this._googleMap=new google.maps.Map(this.element,this._options),this.markers=[],this.lastMarker=null,a&&setTimeout(a,1e3)}var e,n,r;return e=t,(n=[{key:"addMarkers",value:function(t,e){var n=this,a=new google.maps.LatLngBounds;this.markers=t.map(function(t){var r=n.addMarkerWithInfoWindow(t,e);return a.extend(r.position),r}),this.markers.length>0&&(this.GoogleMap.fitBounds(a),this.GoogleMap.setZoom(this._options.zoom))}},{key:"addMarker",value:function(t){var e=t.position,n=t.content;return new google.maps.Marker({animation:google.maps.Animation.DROP,map:this.GoogleMap,position:e,content:n})}},{key:"addMarkerWithInfoWindow",value:function(t,e){var n=this,a=this.addMarker(t),r=new google.maps.InfoWindow;return a.addListener("click",function(){n.lastMarker&&n.lastMarker.close(),n.lastMarker=r,n.GoogleMap.panTo(a.getPosition()),n.GoogleMap.panBy(0,-150),e(r,a)}),a}},{key:"resetMarkers",value:function(){this.markers.forEach(function(t,e){t.setMap(null),google.maps.event.clearInstanceListeners(t)}),this.markers=[]}},{key:"GoogleMap",get:function(){return this._googleMap}}])&&a(e.prototype,n),r&&a(e,r),t}();e.a=r},,,,,function(t,e,n){(t.exports=n(5)(!1)).push([t.i,'.restaurant-filters{display:flex;flex-direction:column;background:hsla(0,0%,93%,.25);padding:.8rem}.restaurant-filters .filter-title{border:0;clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.filters{display:flex;flex-direction:column}.filters .row{display:flex;padding:.4rem}.filters label{font-weight:700;flex:1 0 30%}.filters select{border:1px solid rgba(51,51,51,.35);color:#333;flex:1 0 45%}.filters select:active,.filters select:focus{background:#9affdc;border-color:#009a65;color:#333;outline:none}@media screen and (min-width:550px){.filters{flex-direction:row}.filters .row{padding:.8rem 0;margin-right:1.06667rem}.filters label{flex:1 0 auto}.filters select{margin:0 1.06667rem}}.map-container{border:1px inset rgba(51,51,51,.35);display:flex;flex:1 0 auto}.map{background-color:#e1e1e1;flex:1 0 auto;height:auto;min-height:40rem;opacity:1;transition:opacity 1s ease}.map .map__loading{color:rgba(51,51,51,.85);display:block;font-weight:700;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}.infoWindow{max-width:50vmin}.infoWindow .infoWindow__title{width:100%}.infoWindow .infoWindow__image{max-width:100%}.infoWindow .infoWindow__address{font-size:1.4rem;margin-bottom:1.06667rem}.infoWindow .infoWindow__link{color:#b22200;font-weight:700;text-decoration:underline}@media screen and (min-width:550px){.infoWindow{max-width:30vmin}}.restaurants{height:auto;margin-bottom:1.6rem;padding:1.06667rem}.restaurants .restaurant-count{background:hsla(0,0%,93%,.5);border:1px solid hsla(0,0%,68%,.25);border-radius:.3rem;padding:.8rem;margin-bottom:1.6rem}.restaurants .restaurant-count .restaurant-count__text{font-weight:700}.restaurants-list{display:grid;grid-row-gap:3rem;grid-column-gap:3rem;grid-template-columns:repeat(auto-fill,minmax(26.2rem,1fr))}.restaurants-list__item{background:hsla(0,0%,93%,.65);border:1px solid rgba(51,51,51,.25);border-radius:2.4rem 0 2.4rem 0;box-shadow:0 0 1rem rgba(51,51,51,.5);display:flex;flex-direction:column;min-height:30rem;position:relative}.restaurants-list__item .restaurant-item__image{border-radius:2.4rem 0 0 0}.restaurants-list__item .restaurant-item__info{background:#eee;border-top:1px solid rgba(51,51,51,.75);border-radius:0 0 2.4rem 0;color:#333;display:flex;flex-direction:column;flex:1;justify-content:space-evenly;padding:.8rem 1.06667rem}.restaurants-list__item .restaurant-item__title{color:#333;font-size:2rem;text-align:center;text-transform:uppercase}.restaurants-list__item .restaurant-item___address,.restaurants-list__item .restaurant-item__neighborhood{color:#484848;font-size:1.4rem}.restaurants-list__item .restaurant-item__review{display:block;font-size:1.6rem;font-weight:400}.restaurants-list__item .restaurant-item__review:before{color:orange;content:"\\2605";padding-right:.5rem;position:relative;top:-.1rem}.restaurants-list__item .restaurant-item__detail-link{background:#b22200;border:1px solid rgba(0,0,0,.25);border-radius:.3rem;color:#fff;display:block;margin:1.6rem auto .8rem;padding:.8rem;text-align:center;transition:all .3s ease;width:50%}.restaurants-list__item .restaurant-item__detail-link:active,.restaurants-list__item .restaurant-item__detail-link:focus,.restaurants-list__item .restaurant-item__detail-link:hover{background:#ff3100;box-shadow:0 0 1.06667rem rgba(51,51,51,.9);outline:none}',""])},function(t,e,n){var a=n(8);"string"==typeof a&&(a=[[t.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(4)(a,r);a.locals&&(t.exports=a.locals)},,,,function(t,e,n){"use strict";n.r(e);n(1);var a=n(0),r=n(3),i=n(2);n(9);function o(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}self.initMap=function(){l.loadMap()};var s=function(t,e){var n=document.createDocumentFragment(),a=document.createElement("option");e.forEach(function(t){var e=a.cloneNode();e.textContent=t,e.value=t,n.appendChild(e)}),t.appendChild(n)},l={map:null,restaurants:null,pageElements:{cuisineSelect:document.getElementById("cuisine"),filterForm:document.querySelector(".filters"),neighborhoodSelect:document.getElementById("neighborhood"),restaurantsList:document.querySelector(".restaurants-list"),restaurantResultCount:document.querySelector(".restaurant-count")},render:function(){var t=this;Object(i.a)(),a.a.fetchRestaurants().then(function(e){if(!e)throw Error("Restaurants could not be displayed");var n=t.pageElements,a=(n.mobileButtonBar,n.filterForm);t.restaurants=e,t.populateFilterForm(),t.populateRestaurantsList(),a.addEventListener("change",t.handleFilterUpdates.bind(t))}).catch(console.error)},populateFilterForm:function(){var t=o(new Set(this.restaurants.map(function(t){return t.neighborhood}))),e=o(new Set(this.restaurants.map(function(t){return t.cuisine_type}))),n=this.pageElements,a=n.neighborhoodSelect,r=n.cuisineSelect;s(a,t),s(r,e)},handleFilterUpdates:function(t){var e=this,n=this.pageElements,r=n.neighborhoodSelect,i=n.cuisineSelect,o=r[r.selectedIndex].value,s=i[i.selectedIndex].value;a.a.fetchRestaurants().then(function(t){if(!t)throw Error("Restaurants could not be displayed");t="all"!==s?t.filter(function(t){return t.cuisine_type===s}):t,t="all"!==o?t.filter(function(t){return t.neighborhood===o}):t,e.restaurants=t,e.populateRestaurantsList()}).catch(console.error),t.stopPropagation()},populateRestaurantsList:function(){if(this.restaurants){var t=this.pageElements,e=t.restaurantsList,n=t.restaurantResultCount,r=document.createDocumentFragment(),i=this.restaurants.length;this.restaurants.forEach(function(t){var e,n,i,o,s,l,u,c,d,m;r.appendChild((e=t,n=document.createElement("span"),i=document.createElement("li"),o=document.createElement("img"),s=document.createElement("div"),l=document.createElement("h2"),u=n.cloneNode(),c=document.createElement("address"),d=document.createElement("a"),m=n.cloneNode(),o.className="restaurant-item__image",o.src=a.a.restaurantImgUrl(e),o.setAttribute("alt",e.altText),s.className="restaurant-item__info",l.textContent=e.name,l.className="restaurant-item__title",u.textContent=e.neighborhood,u.className="restaurant-item__neighborhood",c.className="restaurant-item___address",c.textContent=e.address,m.className="restaurant-item__review",a.a.calculateAverageReview(e.id).then(function(t){m.textContent=t,m.setAttribute("aria-label","Average review"),s.append(l),s.append(u),s.append(c),l.append(m),s.append(d)}),d.textContent="Details",d.href=a.a.restaurantUrl(e),d.title="View additional details about ".concat(e.name),d.className="restaurant-item__detail-link",o.onload=function(){i.append(o),i.append(s)},i.classList.add("restaurants-list__item"),i))}),this.resetRestaurants(),e.appendChild(r),n.innerHTML='\n        Displaying <span class="restaurant-count__text">'.concat(i,"</span> \n        restaurant").concat(1===i?"":"s","\n      "),this.updateMap()}},resetRestaurants:function(){var t=this.pageElements,e=t.restaurantsList,n=t.restaurantResultCount;e.innerHTML="",n.innerHTML='Displaying <span class="restaurant-count__text">0</span> restaurants'},updateMap:function(){if(this.map){var t=this.restaurants.map(function(t){return{position:t.latlng,content:{address:t.address,cuisine:t.cuisine_type,photo:a.a.restaurantImgUrl(t),altText:t.altText,title:t.name,url:a.a.restaurantUrl(t)}}});this.resetMap(),this.map.addMarkers(t,this.handleMapMarkerClick)}},handleMapMarkerClick:function(t,e){var n=e.content,a=n.title,r=n.photo,i=n.altText,o=n.address,s=n.url;t.setContent('\n      <div class="infoWindow">\n        <img src="'.concat(r,'" alt="').concat(i,'" class="infoWindow__image">\n        <h2 class="infoWindow__title">').concat(a,'</h2>\n        <address class="infoWindow__address">').concat(o,'</address>\n        <a href="').concat(s,'" title="View more information about ').concat(a,'" class="infoWindow__link">View Details</a>\n      </div>\n    ')),t.open(e.map,e)},loadMap:function(){this.map=new r.a(null,null,function(){document.querySelector(".map iframe").title="Restaurant Locations"}),this.restaurants&&this.updateMap()},resetMap:function(){this.map&&this.map.resetMarkers()}};e.default=l}]]);
//# sourceMappingURL=home.min.js.map